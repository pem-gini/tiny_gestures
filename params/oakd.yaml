###
###https://docs.luxonis.com/software/ros/depthai-ros/driver/
###

### we have to kind of emuate this pipeline
###
###    camRgb.setPreviewSize(416, 416)
###    camRgb.setResolution(dai.ColorCameraProperties.SensorResolution.THE_1080_P)
###    camRgb.setInterleaved(False)
###    camRgb.setColorOrder(dai.ColorCameraProperties.ColorOrder.BGR)
###    
###    monoLeft.setResolution(dai.MonoCameraProperties.SensorResolution.THE_400_P)
###    monoLeft.setCamera("left")
###    monoRight.setResolution(dai.MonoCameraProperties.SensorResolution.THE_400_P)
###    monoRight.setCamera("right")
###    
###    # setting node configs
###    stereo.setDefaultProfilePreset(dai.node.StereoDepth.PresetMode.HIGH_DENSITY)
###    # Align depth map to the perspective of RGB camera, on which inference is done
###    stereo.setDepthAlign(dai.CameraBoardSocket.CAM_A)
###    stereo.setOutputSize(monoLeft.getResolutionWidth(), monoLeft.getResolutionHeight())
###    stereo.setSubpixel(True)
###
###    monoLeft.out.link(stereo.left)
###    monoRight.out.link(stereo.right)
###    camRgb.preview.link(spatialDetectionNetwork.input)    
###    stereo.depth.link(spatialDetectionNetwork.inputDepth)
###    spatialDetectionNetwork.passthroughDepth.link(xoutDepth.input)
###    
/oak:
  ros__parameters:
    ### will be added via launchfile due to me not wanting to fix the path here
    nn:
      i_nn_config_path: PLACEHOLDER_PATH_TO_CONFIG_JSON_WHICH_WILL_BE_REPLACED_BY_LAUNCH_CONFIG
      i_enable_passthrough: true
      i_enable_passthrough_depth: true

    camera:
      # i_nn_type: none
      # i_nn_type: rgb
      i_fps: 10.0
      i_nn_type: spatial
      i_pipeline_dump: true

      
    stereo:
      # i_stereo_conf_threshold: 40
      i_stereo_conf_threshold: 200
      i_subpixel: true
      # i_depth_filter_size: 7 ### kernel size in pixels
      #i_depth_preset: HIGH_ACCURACY ### Prefers accuracy over density. More invalid depth values, but less outliers.
      i_depth_preset: HIGH_DENSITY ###Prefers density over accuracy. Less invalid depth values, but more outliers.
      i_lr_check: true ### Left-Right Check or LR-Check is used to remove incorrectly calculated disparity pixels due to occlusions at object borders (Left and Right camera views are slightly different).
      #LRC Threshold: Specifies the max difference between disparity pixels that will make the pixel invalidated (the higher threshold, the more points will get through)
      # i_lrc_threshold: 2
      i_lrc_threshold: 10
      i_fps: 10.0

      ### https://docs.luxonis.com/projects/api/en/latest/tutorials/configuring-stereo-depth/
      # i_enable_decimation_filter: true
      # i_decimation_filter_decimation_mode: NON_ZERO_MEDIAN ### "PIXEL_SKIPPING", "NON_ZERO_MEDIAN", "NON_ZERO_MEAN"
      # i_decimation_filter_decimation_factor: 4 ### default 1, max 4

      i_height: 416
      i_width: 416
      i_align_depth: true

    rgb:
      i_fps: 10.0
      # i_enable_preview: true
      # i_preview_size: 416
      # i_keep_preview_aspect_ratio: true

    left:
      i_publish_topic: false
      i_fps: 10.0
      # i_resolution: 400P


    right:
      i_publish_topic: false
      i_fps: 10.0
      # i_resolution: 400P
